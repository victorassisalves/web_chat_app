<!DOCTYPE html>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<div class="container">
    <br>
    <div class="jumbotron">
        <h1 class="display-4">Web App Chat</h1>
        <input id="nome" class="form-control" placeholder="Nome">
        <br>
        <textarea id="mensagem" class="form-control" placeholder="Mensagem"></textarea>
        <br>
        <button id="enviar" class="btn btn-success">Enviar</button>
    </div>
    <br>
    <div id="mensagens">

    </div>
</div>

<script>
    $(()=>{
        console.log("PÃ¡gina carregada");
        $(`#enviar`).click(() => {
            const mensagem = {nome: $('#nome').val(), mensagem: $('#mensagem').val()};
            postMensagem(mensagem)

        });
        getMensagem();
    });

    function addMensagem(mensagem) {
        $("#mensagens").append(`<h4> ${mensagem.nome}: </h4> <p> ${mensagem.mensagem} </p>`)
    };

    function getMensagem() {
        $.get(`http://localhost:3000/mensagens`, (dados) => {

        console.log(`TCL: getMensagem -> dados`, dados)
            dados.forEach(addMensagem);
        });
    }
    function postMensagem(mensagem) {
        $.post(`http://localhost:3000/mensagens`, mensagem);
    }
</script>